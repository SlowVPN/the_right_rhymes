{% extends "dictionary/base.html" %}
{% block title %}{{ query }} ⋅ Search Results ⋅ {% endblock %}

{% block content %}
<div class="container">
    {% if examples %}
    <header class="page-header">
        <h1 class="page-title">{{ examples|length }} search results for <strong>{{ query }}</strong> in Lyrics</h1>
    </header>
    <div class="trr-list">
        {% for example in examples %}
            <div class="trr-list-group-item">
                <div>
                    <span class="date">{{ example.example.release_date_string }}</span>
                    <span class="artist"><a href="{% url 'artist' example.example.artist_slug %}">{{ example.example.artist_name }}</a></span>
                    <span class="songTitle">"{{ example.example.song_title }}"</span>
                     {% if example.featured_artists %}
                        <span> feat. </span>
                        {% for feat in example.featured_artists %}
                            <span class="artist"><a href="{% url 'artist' feat.slug %}">{{feat.name}}</a>{% if not forloop.last %}, {% endif %}</span>
                        {% endfor %}
                    {% endif %}
                    <span class="album">[{{ example.example.album }}]</span>
                    <div class="lyric">{{ example.linked_lyric|safe }}</div>
                </div>
                <div class="search-more-link">
                    <span>cited at </span>
                    {% for sense in example.cited_at %}
                        <a href="{% url 'entry' sense.slug %}#{{sense.anchor}}">{{sense.headword}}</a>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
    {% elif artists %}
    <header class="page-header">
        <h1 class="page-title">{{ artists|length }} search results for <strong>{{ query }}</strong> in Artists</h1>
    </header>
    <div class="trr-list">
        {% for artist in artists %}
            <div class="trr-list-group-item">
               <div>
                  <strong>
                     <a href="{% url 'artist' artist.slug %}">{{ artist.name }}</a>
                  </strong>
               </div>
                <div>({{artist.slug}})</div>
                {% if artist.image %}
                    <a href="{% url 'artist' artist.slug %}">
                        <div class="artist-image" style="background-image: url({{ artist.image }})"></div>
                    </a>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    {% elif query == '' %}
        <h3 class="trr-list-header"><strong>empty</strong> query string -- Your search game is <strong>weak</strong>, yo</h3>
    {% else %}
        <h3 class="trr-list-header">Sorry, couldn't find any matches for <strong>{{ query }}</strong></h3>
    {% endif %}
</div>
{% endblock %}